<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learning Platform - Master New Skills</title>
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48Y2lyY2xlIGN4PSI1MCIgY3k9IjUwIiByPSI0MCIgZmlsbD0iIzY2N2VlYSIvPjx0ZXh0IHg9IjUwIiB5PSI2MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjQwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+8J+UpzwvdGV4dD48L3N2Zz4=" type="image/svg+xml">
    <meta name="description" content="Discover and master new skills with our comprehensive learning platform. From automation to programming, find the perfect course for you.">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <!-- Framework CSS -->
    <link rel="stylesheet" href="./assets/css/framework.css">
    <link rel="stylesheet" href="./assets/css/auth.css">
    
    <!-- Dashboard Specific Styles -->
    <style>
        /* Dashboard Specific Styles */
        .hero-section {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: var(--space-3xl) 0;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
            opacity: 0.1;
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: var(--space-lg);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .hero-subtitle {
            font-size: 1.25rem;
            opacity: 0.9;
            margin-bottom: var(--space-2xl);
            max-width: 600px;
        }

        .search-hero {
            max-width: 600px;
            margin: 0 auto var(--space-2xl);
        }

        .search-hero .search-input {
            font-size: 1.125rem;
            padding: var(--space-lg);
            border: none;
            box-shadow: var(--shadow-lg);
        }

        .hero-stats {
            display: flex;
            gap: var(--space-2xl);
            justify-content: center;
            flex-wrap: wrap;
        }

        .stat {
            text-align: center;
        }

        .stat-number {
            display: block;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: var(--space-xs);
        }

        .stat-label {
            font-size: 0.875rem;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Course Grid Styles */
        .course-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: var(--space-lg);
            margin-top: var(--space-lg);
        }

        .course-card {
            cursor: pointer;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .course-card .card-body {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .course-thumbnail {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: var(--radius-md) var(--radius-md) 0 0;
        }

        .course-badges {
            position: absolute;
            top: var(--space-md);
            right: var(--space-md);
            display: flex;
            gap: var(--space-sm);
            flex-wrap: wrap;
        }

        .course-title {
            margin-bottom: var(--space-sm);
            color: var(--text-primary);
        }

        .course-description {
            color: var(--text-secondary);
            flex: 1;
            margin-bottom: var(--space-md);
        }

        .course-meta {
            display: flex;
            gap: var(--space-sm);
            margin-bottom: var(--space-md);
            flex-wrap: wrap;
        }

        .course-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-md);
            flex-wrap: wrap;
        }

        .rating {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .rating-stars {
            color: #ffd700;
        }

        .course-tags {
            display: flex;
            gap: var(--space-xs);
            margin-bottom: var(--space-md);
            flex-wrap: wrap;
        }

        .progress-container {
            margin-bottom: var(--space-md);
        }

        .progress-text {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-top: var(--space-xs);
        }

        /* Section Styles */
        .section {
            padding: var(--space-3xl) 0;
        }

        .section-header {
            text-align: center;
            margin-bottom: var(--space-2xl);
        }

        .section-title {
            font-size: 2.5rem;
            margin-bottom: var(--space-md);
            color: var(--text-primary);
        }

        .section-subtitle {
            font-size: 1.125rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
        }

        /* Filter Bar */
        .filter-bar {
            background: var(--card-background);
            padding: var(--space-lg);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            margin-bottom: var(--space-2xl);
        }

        .filter-row {
            display: flex;
            gap: var(--space-lg);
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: var(--space-xs);
        }

        .filter-select {
            min-width: 150px;
        }

        /* Category Grid */
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-lg);
            margin-top: var(--space-lg);
        }

        .category-card {
            text-align: center;
            padding: var(--space-2xl);
            background: var(--card-background);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-normal);
            cursor: pointer;
        }

        .category-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
        }

        .category-icon {
            font-size: 3rem;
            margin-bottom: var(--space-lg);
        }

        .category-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: var(--space-sm);
        }

        .category-count {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }

            .hero-stats {
                gap: var(--space-lg);
            }

            .course-grid {
                grid-template-columns: 1fr;
            }

            .filter-row {
                flex-direction: column;
                align-items: stretch;
            }

            .filter-group {
                width: 100%;
            }

            .section-title {
                font-size: 2rem;
            }
        }

        /* Loading States */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
        }

        /* Empty States */
        .empty-state {
            text-align: center;
            padding: var(--space-3xl);
        }

        .empty-state-icon {
            font-size: 4rem;
            color: var(--text-muted);
            margin-bottom: var(--space-lg);
        }

        .empty-state-title {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: var(--space-md);
        }

        .empty-state-text {
            color: var(--text-muted);
        }
    </style>
</head>
<body>
    <!-- Header Navigation -->
    <header class="header">
        <div class="container">
            <nav class="navbar">
                <div class="navbar-brand">
                    <a href="/" class="brand-link">
                        <span class="brand-icon">üéì</span>
                        <span class="brand-text">Learning Platform</span>
                    </a>
                </div>
                
                <div class="navbar-content">
                    <div class="navbar-search">
                        <input 
                            type="text" 
                            id="nav-search" 
                            class="search-input-nav" 
                            placeholder="Search courses..."
                            aria-label="Search courses"
                        >
                        <button id="nav-search-btn" class="search-button-nav" onclick="performNavSearch()" aria-label="Search">
                            üîç
                        </button>
                    </div>
                    
                    <div class="navbar-actions">
                        <!-- Home Button (when authenticated) -->
                        <button id="home-btn" class="home-button" onclick="goToHomeDashboard()" style="display: none;" title="Go to Dashboard">
                            üè† Home
                        </button>
                        
                        <!-- User Profile (when authenticated) -->
                        <div id="user-profile" class="user-profile" style="display: none;">
                            <div class="user-info">
                                <span class="user-name" id="user-name">Demo User</span>
                                <div class="user-points">
                                    <span class="points-badge" id="user-points">150 pts</span>
                                </div>
                            </div>
                            <img id="user-avatar" class="user-avatar" src="" alt="User Avatar">
                            
                            <!-- User Dropdown -->
                            <div id="user-dropdown" class="user-dropdown">
                                <div class="dropdown-header">
                                    <div class="dropdown-user-info">
                                        <img id="dropdown-avatar" class="dropdown-avatar" src="" alt="User Avatar">
                                        <div class="dropdown-user-details">
                                            <h3 id="dropdown-name">Demo User</h3>
                                            <p id="dropdown-email">demo@learningplatform.com</p>
                                        </div>
                                    </div>
                                    
                                    <div class="user-stats">
                                        <div class="stat-item">
                                            <span class="stat-value" id="stat-points">150</span>
                                            <span class="stat-label">Points</span>
                                        </div>
                                        <div class="stat-item">
                                            <span class="stat-value" id="stat-streak">5</span>
                                            <span class="stat-label">Streak</span>
                                        </div>
                                        <div class="stat-item">
                                            <span class="stat-value" id="stat-courses">2</span>
                                            <span class="stat-label">Courses</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="dropdown-menu">
                                    <button class="dropdown-item" onclick="goToHomeDashboard()">
                                        üìä Dashboard
                                    </button>
                                    <button class="dropdown-item" onclick="goToBrowseCourses()">
                                        üìö Browse Courses
                                    </button>
                                    <button class="dropdown-item" onclick="window.location.href='#'">
                                        üë§ Profile
                                    </button>
                                    <button class="dropdown-item" onclick="window.location.href='#'">
                                        ‚öôÔ∏è Settings
                                    </button>
                                    <button class="dropdown-item" onclick="window.location.href='#'">
                                        üèÜ Achievements
                                    </button>
                                    <button class="dropdown-item logout" onclick="handleLogout()">
                                        üö™ Logout
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Login Button (when not authenticated) -->
                        <button id="login-btn" class="login-button" onclick="showAuthModal()">
                            Sign In
                        </button>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Authentication Modal -->
    <div id="auth-modal" class="auth-modal">
        <div class="auth-modal-content">
            <button class="auth-close" onclick="hideAuthModal()">&times;</button>
            
            <div class="auth-modal-header">
                <h2 id="auth-title">Sign In</h2>
                <p id="auth-subtitle">Welcome back! Please sign in to your account.</p>
            </div>
            
            <div id="auth-error" class="auth-error"></div>
            
            <!-- Login Form -->
            <form id="login-form" class="auth-form" style="display: block;" novalidate>
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input 
                        type="text" 
                        id="login-email" 
                        class="form-input" 
                        placeholder="Enter your email"
                        onload="this.removeAttribute('required')"
                        onfocus="this.removeAttribute('required')"
                    >
                </div>
                
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input 
                        type="password" 
                        id="login-password" 
                        class="form-input" 
                        placeholder="Enter your password"
                        onload="this.removeAttribute('required')"
                        onfocus="this.removeAttribute('required')"
                    >
                </div>
                
                <button type="submit" class="auth-button">Sign In</button>
            </form>
            
            <!-- Register Form -->
            <form id="register-form" class="auth-form" style="display: none;" novalidate>
                <div class="form-group">
                    <label for="register-firstname">First Name</label>
                    <input 
                        type="text" 
                        id="register-firstname" 
                        class="form-input" 
                        placeholder="Enter your first name"
                        onload="this.removeAttribute('required')"
                        onfocus="this.removeAttribute('required')"
                    >
                </div>
                
                <div class="form-group">
                    <label for="register-lastname">Last Name</label>
                    <input 
                        type="text" 
                        id="register-lastname" 
                        class="form-input" 
                        placeholder="Enter your last name"
                        onload="this.removeAttribute('required')"
                        onfocus="this.removeAttribute('required')"
                    >
                </div>
                
                <div class="form-group">
                    <label for="register-email">Email</label>
                    <input 
                        type="text" 
                        id="register-email" 
                        class="form-input" 
                        placeholder="Enter your email"
                        onload="this.removeAttribute('required')"
                        onfocus="this.removeAttribute('required')"
                    >
                </div>
                
                <div class="form-group">
                    <label for="register-password">Password</label>
                    <input 
                        type="password" 
                        id="register-password" 
                        class="form-input" 
                        placeholder="Create a password"
                        onload="this.removeAttribute('required')"
                        onfocus="this.removeAttribute('required')"
                    >
                </div>
                
                <button type="submit" class="auth-button" onclick="console.log('Create Account button clicked!')">Create Account</button>
            </form>
            
            <script>
                // Immediate cleanup script - runs as soon as this part of the DOM is parsed
                (function() {
                    const inputs = ['login-email', 'login-password', 'register-email', 'register-password', 'register-firstname', 'register-lastname'];
                    inputs.forEach(id => {
                        const element = document.getElementById(id);
                        if (element) {
                            element.removeAttribute('required');
                        }
                    });
                })();
            </script>
            
            <div class="auth-divider">or</div>
            
            <div class="auth-toggle">
                <span id="auth-toggle-text">Don't have an account?</span>
                <button type="button" id="auth-toggle-btn" onclick="toggleAuthMode()">Sign Up</button>
            </div>
            
            <!-- Demo Credentials -->
            <div class="demo-credentials">
                <h4>Demo Account</h4>
                <p>Email: <code>demo@learningplatform.com</code></p>
                <p>Password: <code>demo123</code></p>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="hero-content text-center">
                <h1 class="hero-title">Master New Skills</h1>
                <p class="hero-subtitle">
                    Discover comprehensive courses designed to help you learn efficiently and effectively. 
                    From automation to programming, level up your expertise with our interactive learning platform.
                </p>
                
                <!-- Hero Search -->
                <div class="search-hero">
                    <div class="search-container">
                        <input 
                            type="text" 
                            id="search-input" 
                            class="form-input search-input" 
                            placeholder="Search for courses, skills, or topics..."
                            aria-label="Search courses"
                        >
                        <button id="hero-search-btn" class="search-button" onclick="performHeroSearch()" aria-label="Search">
                            üîç
                        </button>
                    </div>
                </div>
                
                <!-- Platform Stats -->
                <div class="hero-stats">
                    <div class="stat">
                        <span class="stat-number" id="total-courses">6</span>
                        <span class="stat-label">Courses</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="total-students">8,936</span>
                        <span class="stat-label">Students</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number">4.7</span>
                        <span class="stat-label">Avg Rating</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number">95%</span>
                        <span class="stat-label">Success Rate</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Personalized Dashboard (when authenticated) -->
    <div id="personalized-dashboard" style="display: none;">
        <!-- Welcome Banner -->
        <section class="personalized-section">
            <div class="container">
                <div class="welcome-banner">
                    <div class="welcome-content">
                        <h2 id="welcome-message">Welcome back, Demo!</h2>
                        <p id="welcome-subtitle">Ready to continue your learning journey? You're doing great!</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Continue Learning Section -->
        <section class="personalized-section">
            <div class="container">
                <div class="continue-learning">
                    <h3>Continue Learning</h3>
                    <div id="current-courses-list">
                        <!-- Current courses will be loaded here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Recommended Courses Section -->
        <section class="personalized-section">
            <div class="container">
                <div class="recommendations-section">
                    <div class="section-header">
                        <h3 class="section-title">Recommended for You</h3>
                        <p class="section-subtitle">Courses tailored to your interests and learning goals</p>
                    </div>
                    <div id="dashboard-recommended-courses" class="course-grid">
                        <!-- Recommended courses will be loaded here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Achievements Section -->
        <section class="personalized-section">
            <div class="container">
                <div class="achievements-section">
                    <div class="section-header">
                        <h3 class="section-title">Your Achievements</h3>
                    </div>
                    <div id="achievements-grid" class="achievements-grid">
                        <!-- Achievements will be loaded here -->
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Main Content -->
    <main>
        <!-- Featured Courses Section -->
        <section class="section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Featured Courses</h2>
                    <p class="section-subtitle">
                        Handpicked courses that are trending and highly recommended by our community
                    </p>
                </div>
                
                <div id="featured-courses" class="course-grid">
                    <!-- Featured courses will be loaded here -->
                    <div class="loading">
                        <div class="spinner"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Browse by Category Section -->
        <section class="section" style="background: var(--background-color);">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Browse by Category</h2>
                    <p class="section-subtitle">
                        Explore courses organized by subject areas and find exactly what you're looking for
                    </p>
                </div>
                
                <div class="category-grid">
                    <div class="category-card" data-category="Automation">
                        <div class="category-icon">‚öôÔ∏è</div>
                        <h3 class="category-title">Automation</h3>
                        <p class="category-count"><span id="automation-count">2</span> courses</p>
                    </div>
                    
                    <div class="category-card" data-category="Programming">
                        <div class="category-icon">üíª</div>
                        <h3 class="category-title">Programming</h3>
                        <p class="category-count"><span id="programming-count">1</span> courses</p>
                    </div>
                    
                    <div class="category-card" data-category="Web Development">
                        <div class="category-icon">üåê</div>
                        <h3 class="category-title">Web Development</h3>
                        <p class="category-count"><span id="web-dev-count">1</span> courses</p>
                    </div>
                    
                    <div class="category-card" data-category="Data Science">
                        <div class="category-icon">üìä</div>
                        <h3 class="category-title">Data Science</h3>
                        <p class="category-count"><span id="data-science-count">2</span> courses</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Recommended for You Section -->
        <section class="section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Recommended for You</h2>
                    <p class="section-subtitle">
                        Personalized course recommendations based on your interests and learning history
                    </p>
                </div>
                
                <div id="recommended-courses" class="course-grid">
                    <!-- Recommended courses will be loaded here -->
                    <div class="loading">
                        <div class="spinner"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- All Courses Section -->
        <section class="section" style="background: var(--background-color);">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">All Courses</h2>
                    <p class="section-subtitle">
                        Browse our complete catalog of courses with advanced filtering options
                    </p>
                </div>
                
                <!-- Filter Bar -->
                <div class="filter-bar">
                    <div class="filter-row">
                        <div class="filter-group">
                            <label class="form-label">Category</label>
                            <select id="category-filter" class="form-input filter-select" data-filter="category">
                                <option value="">All Categories</option>
                                <option value="Automation">Automation</option>
                                <option value="Programming">Programming</option>
                                <option value="Web Development">Web Development</option>
                                <option value="Data Science">Data Science</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="form-label">Difficulty</label>
                            <select id="difficulty-filter" class="form-input filter-select" data-filter="difficulty">
                                <option value="">All Levels</option>
                                <option value="beginner">Beginner</option>
                                <option value="intermediate">Intermediate</option>
                                <option value="advanced">Advanced</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="form-label">Duration</label>
                            <select id="duration-filter" class="form-input filter-select" data-filter="duration">
                                <option value="">Any Duration</option>
                                <option value="60">Under 1 hour</option>
                                <option value="120">Under 2 hours</option>
                                <option value="300">Under 5 hours</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="form-label">Rating</label>
                            <select id="rating-filter" class="form-input filter-select" data-filter="rating">
                                <option value="">Any Rating</option>
                                <option value="4.5">4.5+ Stars</option>
                                <option value="4.0">4.0+ Stars</option>
                                <option value="3.5">3.5+ Stars</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div id="all-courses" class="course-grid">
                    <!-- All courses will be loaded here -->
                    <div class="loading">
                        <div class="spinner"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Search Results Section (Initially Hidden) -->
        <section id="search-results-section" class="section" style="display: none;">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Search Results</h2>
                    <p id="search-results-count" class="section-subtitle"></p>
                </div>
                
                <div id="search-results" class="course-grid">
                    <!-- Search results will be displayed here -->
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer style="background: var(--text-primary); color: white; padding: var(--space-2xl) 0; text-align: center;">
        <div class="container">
            <p>&copy; 2024 Learning Platform. Built with ‚ù§Ô∏è for lifelong learners.</p>
        </div>
    </footer>

    <!-- Framework JavaScript -->
    <script src="./assets/js/auth.js"></script>
    <script src="./assets/js/framework.js"></script>
    
    <!-- Dashboard JavaScript -->
    <script>
        class Dashboard {
            constructor() {
                this.framework = null;
                this.currentFilters = {};
                this.init();
            }

            init() {
                // Wait for framework to be ready
                if (!window.learningFramework) {
                    setTimeout(() => this.init(), 100);
                    return;
                }
                
                this.framework = window.learningFramework;
                this.setupEventListeners();
                this.loadContent();
            }

            setupEventListeners() {
                // Search functionality for main search
                const searchInput = document.getElementById('search-input');
                if (searchInput) {
                    let searchTimeout;
                    searchInput.addEventListener('input', (e) => {
                        clearTimeout(searchTimeout);
                        searchTimeout = setTimeout(() => {
                            this.handleSearch(e.target.value);
                        }, 300);
                    });
                    
                    // Handle Enter key press
                    searchInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            e.preventDefault();
                            performHeroSearch();
                        }
                    });
                }

                // Search functionality for nav search
                const navSearch = document.getElementById('nav-search');
                if (navSearch) {
                    let navSearchTimeout;
                    navSearch.addEventListener('input', (e) => {
                        clearTimeout(navSearchTimeout);
                        navSearchTimeout = setTimeout(() => {
                            // Sync search inputs
                            if (searchInput) searchInput.value = e.target.value;
                            this.handleSearch(e.target.value);
                            
                            // If there's a search query, go to browse courses view
                            if (e.target.value.trim()) {
                                goToBrowseCourses();
                            }
                        }, 300);
                    });
                    
                    // Handle Enter key press
                    navSearch.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            e.preventDefault();
                            performNavSearch();
                        }
                    });
                }

                // Filter functionality
                const filterElements = document.querySelectorAll('[data-filter]');
                filterElements.forEach(element => {
                    element.addEventListener('change', () => {
                        this.handleFiltersChange();
                    });
                });

                // Category cards
                const categoryCards = document.querySelectorAll('[data-category]');
                categoryCards.forEach(card => {
                    card.addEventListener('click', () => {
                        const category = card.dataset.category;
                        this.filterByCategory(category);
                    });
                });

                // Course cards - handled by framework
            }

            loadContent() {
                if (!this.framework) return;
                
                this.updateStats();
                this.loadFeaturedCourses();
                this.loadRecommendedCourses();
                this.loadAllCourses();
                this.updateCategoryCounts();
            }

            updateStats() {
                if (!this.framework) return;
                
                const totalCourses = this.framework.getAllCourses().length;
                const totalStudents = this.framework.getAllCourses()
                    .reduce((sum, course) => sum + course.enrollments, 0);

                const totalCoursesEl = document.getElementById('total-courses');
                const totalStudentsEl = document.getElementById('total-students');
                
                if (totalCoursesEl) totalCoursesEl.textContent = totalCourses;
                if (totalStudentsEl) totalStudentsEl.textContent = totalStudents.toLocaleString();
            }

            loadFeaturedCourses() {
                if (!this.framework) return;
                const featuredCourses = this.framework.getFeaturedCourses();
                this.renderCourses(featuredCourses, 'featured-courses');
            }

            loadRecommendedCourses() {
                if (!this.framework) return;
                const recommendations = this.framework.getRecommendations(6);
                this.renderCourses(recommendations, 'recommended-courses');
            }

            loadAllCourses() {
                if (!this.framework) return;
                const allCourses = this.framework.getAllCourses();
                this.renderCourses(allCourses, 'all-courses');
            }

            updateCategoryCounts() {
                const categories = ['Automation', 'Programming', 'Web Development', 'Data Science'];
                categories.forEach(category => {
                    const count = this.framework.getCoursesByCategory(category).length;
                    const elementId = category.toLowerCase().replace(/\s+/g, '-') + '-count';
                    const element = document.getElementById(elementId);
                    if (element) {
                        element.textContent = count;
                    }
                });
            }

            renderCourses(courses, containerId) {
                const container = document.getElementById(containerId);
                if (!container) return;

                if (courses.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon">üìö</div>
                            <h3 class="empty-state-title">No courses found</h3>
                            <p class="empty-state-text">Try adjusting your search or filters</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = courses.map(course => this.renderCourseCard(course)).join('');
            }

            renderCourseCard(course) {
                const progress = this.framework.getCourseProgress(course.id);
                const progressPercent = Math.round((progress.completed / progress.total) * 100);
                const user = this.framework.currentUser || { completedCourses: [], inProgressCourses: [] };
                const isCompleted = user.completedCourses && user.completedCourses.includes(course.id);
                const isInProgress = user.inProgressCourses && user.inProgressCourses.includes(course.id);

                return `
                    <div class="card course-card" data-course-id="${course.id}">
                        <div class="card-header" style="position: relative; padding: 0;">
                            <img src="${course.thumbnail}" alt="${course.title}" class="course-thumbnail">
                            <div class="course-badges">
                                ${course.isNew ? '<span class="badge badge-info">New</span>' : ''}
                                ${course.isFeatured ? '<span class="badge badge-warning">Featured</span>' : ''}
                                ${isCompleted ? '<span class="badge badge-success">Completed</span>' : ''}
                            </div>
                        </div>
                        <div class="card-body">
                            <h3 class="course-title">${course.title}</h3>
                            <p class="course-description">${course.description}</p>
                            
                            <div class="course-meta">
                                <span class="tag">${course.category}</span>
                                <span class="tag">${course.difficulty}</span>
                                <span class="text-muted">${this.framework.formatDuration(course.duration)}</span>
                            </div>
                            
                            <div class="course-stats">
                                <div class="rating">
                                    <span class="rating-stars">${this.renderStarRating(course.rating)}</span>
                                    <span class="rating-value">${course.rating}</span>
                                </div>
                                <span class="enrollments text-muted">${course.enrollments.toLocaleString()} students</span>
                            </div>
                            
                            ${isInProgress ? `
                                <div class="progress-container">
                                    <div class="progress">
                                        <div class="progress-bar" style="width: ${progressPercent}%"></div>
                                    </div>
                                    <div class="progress-text">${progressPercent}% complete</div>
                                </div>
                            ` : ''}
                            
                            <div class="course-tags">
                                ${course.tags.slice(0, 3).map(tag => `<span class="tag">${tag}</span>`).join('')}
                                ${course.tags.length > 3 ? `<span class="tag">+${course.tags.length - 3} more</span>` : ''}
                            </div>
                        </div>
                        <div class="card-footer">
                            <button class="btn btn-primary" onclick="handleCourseClick('${course.id}')">
                                ${isCompleted ? 'Review Course' : isInProgress ? 'Continue Learning' : 'Start Course'}
                            </button>
                        </div>
                    </div>
                `;
            }

            renderStarRating(rating) {
                const fullStars = Math.floor(rating);
                const hasHalfStar = rating % 1 !== 0;
                const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
                
                return [
                    '‚òÖ'.repeat(fullStars),
                    hasHalfStar ? '‚òÜ' : '',
                    '‚òÜ'.repeat(emptyStars)
                ].join('');
            }

            handleSearch(query) {
                const searchResultsSection = document.getElementById('search-results-section');
                const searchResultsCount = document.getElementById('search-results-count');
                
                if (!query || query.trim().length === 0) {
                    if (searchResultsSection) searchResultsSection.style.display = 'none';
                    return;
                }

                // Check if framework is available
                if (!this.framework) {
                    console.error('Framework not available for search');
                    return;
                }

                const results = this.framework.search(query);
                
                if (searchResultsSection) searchResultsSection.style.display = 'block';
                if (searchResultsCount) searchResultsCount.textContent = `Found ${results.length} course${results.length !== 1 ? 's' : ''} for "${query}"`;
                
                this.renderCourses(results, 'search-results');
                
                // Scroll to results
                if (searchResultsSection) searchResultsSection.scrollIntoView({ behavior: 'smooth' });
            }

            handleFiltersChange() {
                const categoryFilter = document.getElementById('category-filter').value;
                const difficultyFilter = document.getElementById('difficulty-filter').value;
                const durationFilter = document.getElementById('duration-filter').value;
                const ratingFilter = document.getElementById('rating-filter').value;

                this.currentFilters = {
                    category: categoryFilter || null,
                    difficulty: difficultyFilter || null,
                    maxDuration: durationFilter ? parseInt(durationFilter) : null,
                    minRating: ratingFilter ? parseFloat(ratingFilter) : 0
                };

                this.applyFilters();
            }

            applyFilters() {
                const searchInput = document.getElementById('search-input');
                const query = searchInput.value;
                
                const results = this.framework.search(query, this.currentFilters);
                this.renderCourses(results, 'all-courses');
            }

            filterByCategory(category) {
                // Set the category filter
                const categoryFilter = document.getElementById('category-filter');
                categoryFilter.value = category;
                
                // Apply filters
                this.handleFiltersChange();
                
                // Scroll to all courses section
                document.getElementById('all-courses').scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Global function to handle course clicks
        function handleCourseClick(courseId) {
            const course = window.learningFramework.getCourse(courseId);
            if (course) {
                if (course.path === '#coming-soon') {
                    alert('This course is coming soon! Stay tuned for updates.');
                } else {
                    window.learningFramework.startCourse(courseId);
                }
            }
        }

        // Authentication Functions
        let isLoginMode = true;

        function showAuthModal() {
            const modal = document.getElementById('auth-modal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Ensure proper initial state
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');
            
            if (isLoginMode) {
                // Enable login form, disable register form
                loginForm.querySelectorAll('input').forEach(input => {
                    input.disabled = false;
                    input.removeAttribute('required');
                });
                registerForm.querySelectorAll('input').forEach(input => {
                    input.disabled = true;
                    input.removeAttribute('required');
                });
            } else {
                // Enable register form, disable login form
                registerForm.querySelectorAll('input').forEach(input => {
                    input.disabled = false;
                    input.removeAttribute('required');
                });
                loginForm.querySelectorAll('input').forEach(input => {
                    input.disabled = true;
                    input.removeAttribute('required');
                });
            }
        }

        function hideAuthModal() {
            const modal = document.getElementById('auth-modal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
            clearAuthError();
        }

        function toggleAuthMode() {
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');
            const authTitle = document.getElementById('auth-title');
            const authSubtitle = document.getElementById('auth-subtitle');
            const authToggleText = document.getElementById('auth-toggle-text');
            const authToggleBtn = document.getElementById('auth-toggle-btn');

            isLoginMode = !isLoginMode;

            console.log('Toggling auth mode to:', isLoginMode ? 'login' : 'register');

            if (isLoginMode) {
                // Show login form, completely disable register form
                loginForm.style.display = 'block';
                registerForm.style.display = 'none';
                
                // Disable all inputs in register form to prevent validation
                registerForm.querySelectorAll('input').forEach(input => {
                    input.disabled = true;
                    input.removeAttribute('required');
                });
                
                // Enable all inputs in login form
                loginForm.querySelectorAll('input').forEach(input => {
                    input.disabled = false;
                    input.removeAttribute('required');
                });
                
                authTitle.textContent = 'Sign In';
                authSubtitle.textContent = 'Welcome back! Please sign in to your account.';
                authToggleText.textContent = "Don't have an account?";
                authToggleBtn.textContent = 'Sign Up';
            } else {
                // Show register form, completely disable login form
                loginForm.style.display = 'none';
                registerForm.style.display = 'block';
                
                // Disable all inputs in login form to prevent validation
                loginForm.querySelectorAll('input').forEach(input => {
                    input.disabled = true;
                    input.removeAttribute('required');
                });
                
                // Enable all inputs in register form
                registerForm.querySelectorAll('input').forEach(input => {
                    input.disabled = false;
                    input.removeAttribute('required');
                });
                
                authTitle.textContent = 'Create Account';
                authSubtitle.textContent = 'Join our learning community and start your journey!';
                authToggleText.textContent = 'Already have an account?';
                authToggleBtn.textContent = 'Sign In';
            }

            clearAuthError();
        }



        function showAuthError(message) {
            const errorDiv = document.getElementById('auth-error');
            errorDiv.textContent = message;
            errorDiv.classList.add('show');
        }

        function clearAuthError() {
            const errorDiv = document.getElementById('auth-error');
            errorDiv.classList.remove('show');
        }

        function handleLogout() {
            if (window.authManager) {
                window.authManager.logout();
                hideUserDropdown();
            }
        }

        function toggleUserDropdown() {
            const dropdown = document.getElementById('user-dropdown');
            dropdown.classList.toggle('active');
        }

        function hideUserDropdown() {
            const dropdown = document.getElementById('user-dropdown');
            dropdown.classList.remove('active');
        }

        // Debug function to test registration manually
        function testRegistration() {
            console.log('Testing registration manually...');
            if (!window.authManager) {
                console.error('Auth manager not available!');
                return;
            }
            
            const userData = {
                firstName: 'Test',
                lastName: 'User',
                email: 'test@example.com',
                password: 'password123'
            };
            
            window.authManager.register(userData).then(result => {
                console.log('Manual registration result:', result);
            }).catch(error => {
                console.error('Manual registration error:', error);
            });
        }

        // Setup event listeners after DOM is ready
        function setupAuthEventListeners() {
            console.log('Setting up auth event listeners...');
            
            // Login form submission
            const loginForm = document.getElementById('login-form');
            if (loginForm) {
                console.log('Adding login form event listener...');
                loginForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    clearAuthError();
                    
                    // Re-enable inputs before processing
                    loginForm.querySelectorAll('input').forEach(input => {
                        input.disabled = false;
                    });
                    
                    console.log('Login form submitted');
                    console.log('AuthManager available:', !!window.authManager);
                    
                    if (!window.authManager) {
                        showAuthError('Authentication system not available. Please refresh the page.');
                        return;
                    }

                    const submitBtn = e.target.querySelector('.auth-button');
                    if (!submitBtn) {
                        console.error('Submit button not found');
                        showAuthError('Form error. Please refresh the page.');
                        return;
                    }
                    
                    const originalText = submitBtn.textContent;
                    
                    submitBtn.disabled = true;
                    submitBtn.textContent = 'Signing In...';
                    
                    try {
                        const email = document.getElementById('login-email').value;
                        const password = document.getElementById('login-password').value;
                        
                        console.log('Attempting login for:', email);
                        const result = await window.authManager.login(email, password);
                        
                        console.log('Login result:', result);
                        
                        if (result && result.success) {
                            hideAuthModal();
                            e.target.reset();
                        } else {
                            showAuthError(result ? result.error : 'Login failed');
                        }
                    } catch (error) {
                        console.error('Login error:', error);
                        showAuthError('An unexpected error occurred. Please try again.');
                    } finally {
                        submitBtn.disabled = false;
                        submitBtn.textContent = originalText;
                    }
                });
            } else {
                console.error('Login form not found!');
            }
            
            // Register form submission
            const registerForm = document.getElementById('register-form');
            if (registerForm) {
                console.log('Adding register form event listener...');
                registerForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    clearAuthError();
                    
                    // Re-enable inputs before processing
                    registerForm.querySelectorAll('input').forEach(input => {
                        input.disabled = false;
                    });
                    
                    console.log('Register form submitted');
                    console.log('AuthManager available:', !!window.authManager);
                    
                    if (!window.authManager) {
                        showAuthError('Authentication system not available. Please refresh the page.');
                        return;
                    }

                    const submitBtn = e.target.querySelector('.auth-button');
                    if (!submitBtn) {
                        console.error('Submit button not found');
                        showAuthError('Form error. Please refresh the page.');
                        return;
                    }
                    
                    const originalText = submitBtn.textContent;
                    
                    submitBtn.disabled = true;
                    submitBtn.textContent = 'Creating Account...';
                    
                    try {
                        const userData = {
                            firstName: document.getElementById('register-firstname').value,
                            lastName: document.getElementById('register-lastname').value,
                            email: document.getElementById('register-email').value,
                            password: document.getElementById('register-password').value
                        };
                        
                        console.log('Attempting registration for:', userData.email);
                        const result = await window.authManager.register(userData);
                        
                        console.log('Registration result:', result);
                        
                        if (result && result.success) {
                            hideAuthModal();
                            e.target.reset();
                            alert('Account created successfully! You are now logged in.');
                        } else {
                            showAuthError(result ? result.error : 'Registration failed');
                        }
                    } catch (error) {
                        console.error('Registration error:', error);
                        showAuthError('An unexpected error occurred. Please try again.');
                    } finally {
                        submitBtn.disabled = false;
                        submitBtn.textContent = originalText;
                    }
                });
            } else {
                console.error('Register form not found!');
            }
        }

        // User avatar click handler
        document.addEventListener('click', (e) => {
            const userAvatar = document.getElementById('user-avatar');
            const userDropdown = document.getElementById('user-dropdown');
            
            if (userAvatar && e.target === userAvatar) {
                toggleUserDropdown();
            } else if (userDropdown && !userDropdown.contains(e.target)) {
                hideUserDropdown();
            }
            
            // Close auth modal when clicking outside
            const authModal = document.getElementById('auth-modal');
            if (authModal && e.target === authModal) {
                hideAuthModal();
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                hideAuthModal();
                hideUserDropdown();
            }
        });

        // Initialize dashboard when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM loaded, initializing...');
            
            // Force remove any required attributes to prevent validation conflicts
            function removeRequiredAttributes() {
                document.querySelectorAll('input[required]').forEach(input => {
                    input.removeAttribute('required');
                    console.log('Removed required attribute from:', input.id);
                });
                
                // Also specifically target the problematic inputs
                const loginEmail = document.getElementById('login-email');
                const loginPassword = document.getElementById('login-password');
                const registerEmail = document.getElementById('register-email');
                const registerPassword = document.getElementById('register-password');
                const registerFirstname = document.getElementById('register-firstname');
                const registerLastname = document.getElementById('register-lastname');
                
                [loginEmail, loginPassword, registerEmail, registerPassword, registerFirstname, registerLastname].forEach(input => {
                    if (input) {
                        input.removeAttribute('required');
                        console.log('Force removed required from:', input.id);
                    }
                });
            }
            
            // Run immediately
            removeRequiredAttributes();
            
            // Run again after a short delay in case something adds them back
            setTimeout(removeRequiredAttributes, 100);
            setTimeout(removeRequiredAttributes, 500);
            
            // Set up a MutationObserver to catch any dynamic addition of required attributes
            const observer = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                    if (mutation.type === 'attributes' && mutation.attributeName === 'required') {
                        console.log('Detected required attribute being added to:', mutation.target.id);
                        mutation.target.removeAttribute('required');
                        console.log('Immediately removed required from:', mutation.target.id);
                    }
                });
            });
            
            // Start observing
            setTimeout(() => {
                document.querySelectorAll('input').forEach(input => {
                    observer.observe(input, { attributes: true, attributeFilter: ['required'] });
                });
                console.log('MutationObserver set up to monitor required attributes');
            }, 10);
            
            // Ensure auth manager is initialized
            if (window.authManager) {
                console.log('Initializing auth manager...');
                window.authManager.init();
                
                // Force UI update after initialization
                setTimeout(() => {
                    console.log('Force updating UI after auth manager init');
                    window.authManager.updateUI();
                }, 200);
            } else {
                console.error('Auth manager not available!');
            }
            
            // Check if forms exist
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');
            console.log('Login form found:', !!loginForm);
            console.log('Register form found:', !!registerForm);
            
            // Check form visibility
            if (loginForm) {
                console.log('Login form display:', getComputedStyle(loginForm).display);
            }
            if (registerForm) {
                console.log('Register form display:', getComputedStyle(registerForm).display);
                const createButton = registerForm.querySelector('.auth-button');
                console.log('Create Account button found:', !!createButton);
                if (createButton) {
                    console.log('Create Account button text:', createButton.textContent);
                    console.log('Create Account button disabled:', createButton.disabled);
                }
            }
            
            // Setup authentication event listeners
            setupAuthEventListeners();
            
            // Add direct click handler test for debugging
            setTimeout(() => {
                const registerForm = document.getElementById('register-form');
                if (registerForm) {
                    const createButton = registerForm.querySelector('.auth-button');
                    if (createButton) {
                        createButton.addEventListener('click', (e) => {
                            console.log('Direct click handler triggered!', e);
                            console.log('Event target:', e.target);
                            console.log('Button disabled:', e.target.disabled);
                        });
                        console.log('Added direct click handler to Create Account button');
                    }
                }
            }, 100);
            
            // Initialize Dashboard and store globally
            window.dashboard = new Dashboard();
        });

        // Home button functionality
        function goToHomeDashboard() {
            console.log('Home button clicked - navigating to dashboard');
            
            // Hide main content and show personalized dashboard
            const mainContent = document.querySelector('main');
            const heroSection = document.querySelector('.hero-section');
            const personalizedDashboard = document.getElementById('personalized-dashboard');
            const searchResultsSection = document.getElementById('search-results-section');
            
            if (mainContent) mainContent.style.display = 'none';
            if (heroSection) heroSection.style.display = 'none';
            if (searchResultsSection) searchResultsSection.style.display = 'none';
            if (personalizedDashboard) personalizedDashboard.style.display = 'block';
            
            // Scroll to top
            window.scrollTo(0, 0);
            
            // Update dashboard content if needed
            if (window.learningFramework) {
                window.learningFramework.renderPersonalizedDashboard();
            }
        }

        // Browse Courses functionality
        function goToBrowseCourses(keepSearchResults = false) {
            console.log('Browse Courses clicked - navigating to main content');
            
            // Show main content and hide personalized dashboard
            const mainContent = document.querySelector('main');
            const heroSection = document.querySelector('.hero-section');
            const personalizedDashboard = document.getElementById('personalized-dashboard');
            const searchResultsSection = document.getElementById('search-results-section');
            
            if (personalizedDashboard) personalizedDashboard.style.display = 'none';
            if (!keepSearchResults && searchResultsSection) searchResultsSection.style.display = 'none';
            if (heroSection) heroSection.style.display = 'none'; // Keep hero hidden for logged in users
            if (mainContent) mainContent.style.display = 'block';
            
            // Hide any open dropdowns
            const userDropdown = document.getElementById('user-dropdown');
            if (userDropdown) {
                userDropdown.classList.remove('active');
            }
            
            // Scroll to top only if not preserving search results
            if (!keepSearchResults) {
                window.scrollTo(0, 0);
            }
        }

        // Search button functionality
        function performNavSearch() {
            const navSearch = document.getElementById('nav-search');
            const searchInput = document.getElementById('search-input');
            
            if (navSearch) {
                const query = navSearch.value.trim();
                console.log('Nav search triggered:', query);
                
                // Sync search inputs
                if (searchInput) searchInput.value = query;
                
                if (query) {
                    // Navigate to browse courses view but keep search results visible
                    goToBrowseCourses(true);
                    
                    // Then trigger search to show results
                    setTimeout(() => {
                        if (window.dashboard) {
                            window.dashboard.handleSearch(query);
                        }
                    }, 100);
                } else {
                    // No query, just navigate to browse courses
                    goToBrowseCourses();
                }
            }
        }

        function performHeroSearch() {
            const searchInput = document.getElementById('search-input');
            const navSearch = document.getElementById('nav-search');
            
            if (searchInput) {
                const query = searchInput.value.trim();
                console.log('Hero search triggered:', query);
                
                // Sync search inputs
                if (navSearch) navSearch.value = query;
                
                if (query) {
                    // Navigate to browse courses view but keep search results visible
                    goToBrowseCourses(true);
                    
                    // Then trigger search to show results
                    setTimeout(() => {
                        if (window.dashboard) {
                            window.dashboard.handleSearch(query);
                        }
                    }, 100);
                } else {
                    // No query, just navigate to browse courses
                    goToBrowseCourses();
                }
            }
        }

        // Logout functionality
        function handleLogout() {
            console.log('Logout initiated');
            
            if (window.authManager) {
                // Call the logout method from AuthenticationManager
                window.authManager.logout();
                
                // Hide any open dropdowns
                const userDropdown = document.getElementById('user-dropdown');
                if (userDropdown) {
                    userDropdown.classList.remove('active');
                }
                
                // Scroll to top
                window.scrollTo(0, 0);
                
                console.log('Logout completed');
            } else {
                console.error('Auth manager not available');
            }
        }
    </script>
</body>
</html>